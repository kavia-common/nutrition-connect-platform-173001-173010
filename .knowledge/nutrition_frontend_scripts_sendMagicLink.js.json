{"is_source_file": true, "format": "JavaScript", "description": "This script is used for development purposes to send a magic login link via Supabase authentication API, and to potentially upsert an admin profile in the database. It simplifies user onboarding by handling magic link generation and profile setup, mainly for testing or admin seeding during development.", "external_files": ["@supabase/supabase-js"], "external_methods": ["require('@supabase/supabase-js').createClient"], "published": ["getArg", "getURL"], "classes": [], "methods": [{"name": "getArg(name, defaultValue = undefined)", "description": "Retrieves command-line argument value by name, supporting flags and default values.", "scope": "", "scopeKind": ""}, {"name": "getURL(path = '/')", "description": "Constructs a full URL from a path, using environment variables or defaults.", "scope": "", "scopeKind": ""}], "calls": ["require('@supabase/supabase-js').createClient", "getArg", "getURL", "process.argv.find", "process.argv.includes", "supabase.auth.signInWithOtp", "supabase.auth.admin.listUsers", "supabase.from", "console.error", "console.log", "console.warn", "process.exit"], "search-terms": ["sendMagicLink", "Supabase authentication", "development script", "email magic link", "admin profile seed", "auth.admin.listUsers"], "state": 2, "file_id": 92, "knowledge_revision": 272, "git_revision": "", "ctags": [{"_type": "tag", "name": "SUPABASE_KEY", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const SUPABASE_KEY = process.env.REACT_APP_SUPABASE_KEY || process.env.SUPABASE_SERVICE_ROLE/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "SUPABASE_URL", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const SUPABASE_URL = process.env.REACT_APP_SUPABASE_URL || process.env.SUPABASE_URL;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getArg", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^function getArg(name, defaultValue = undefined) {$/", "language": "JavaScript", "kind": "function", "signature": "(name, defaultValue = undefined)"}, {"_type": "tag", "name": "getURL", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^function getURL(path = '\\/') {$/", "language": "JavaScript", "kind": "function", "signature": "(path = '/')"}, {"_type": "tag", "name": "isAdmin", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const isAdmin = !!getArg('admin', false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "match", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^            const match = usersData.users.find((u) => u.email && u.email.toLowerCase() === email/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "match", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^          const match = usersData.users.find((u) => u.email && u.email.toLowerCase() === email.t/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    let userId = null;$/", "language": "JavaScript", "kind": "variable"}], "hash": "033659884dfa75c36f3edeeb9f9754a3", "format-version": 4, "code-base-name": "nutrition_frontend", "filename": "nutrition_frontend/scripts/sendMagicLink.js", "fields": [{"name": "let userId = null;", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"272": ""}]}