{"is_source_file": true, "format": "JavaScript", "description": "This script automates sending a magic link for user authentication via Supabase, and optionally upserting a user profile with admin privileges. It is intended for development environments to facilitate user onboarding and testing.", "external_files": ["@supabase/supabase-js"], "external_methods": ["require('@supabase/supabase-js').createClient", "supabase.auth.signInWithOtp", "supabase.auth.admin.listUsers", "supabase.from('profiles').upsert"], "published": ["getArg", "getURL"], "classes": [], "methods": [{"name": "getArg(name, defaultValue = undefined)", "description": "Parses command-line arguments by name, returning the value or a default.", "scope": "", "scopeKind": ""}, {"name": "getURL(path = '/')", "description": "Constructs a full URL based on environment variables or a provided path.", "scope": "", "scopeKind": ""}], "calls": ["require('@supabase/supabase-js').createClient", "supabase.auth.signInWithOtp", "supabase.auth.admin.listUsers", "supabase.from('profiles').upsert"], "search-terms": ["sendMagicLink", "Supabase magic link script", "admin profile upsert", "development environment script", "auth token email"], "state": 2, "file_id": 92, "knowledge_revision": 288, "git_revision": "b52dcdc418b60b77602b629778f48dc7540e75e9", "revision_history": [{"272": ""}, {"288": "b52dcdc418b60b77602b629778f48dc7540e75e9"}], "ctags": [{"_type": "tag", "name": "SUPABASE_KEY", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const SUPABASE_KEY = process.env.REACT_APP_SUPABASE_KEY || process.env.SUPABASE_SERVICE_ROLE/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "SUPABASE_URL", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const SUPABASE_URL = process.env.REACT_APP_SUPABASE_URL || process.env.SUPABASE_URL;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getArg", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^function getArg(name, defaultValue = undefined) {$/", "language": "JavaScript", "kind": "function", "signature": "(name, defaultValue = undefined)"}, {"_type": "tag", "name": "getURL", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^function getURL(path = '\\/') {$/", "language": "JavaScript", "kind": "function", "signature": "(path = '/')"}, {"_type": "tag", "name": "isAdmin", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const isAdmin = !!getArg('admin', false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "match", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^            const match = usersData.users.find((u) => u.email && u.email.toLowerCase() === email/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "match", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^          const match = usersData.users.find((u) => u.email && u.email.toLowerCase() === email.t/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    let userId = null;$/", "language": "JavaScript", "kind": "variable"}], "hash": "033659884dfa75c36f3edeeb9f9754a3", "format-version": 4, "code-base-name": "nutrition_frontend", "filename": "nutrition_frontend/scripts/sendMagicLink.js", "fields": [{"name": "let userId = null;", "scope": "", "scopeKind": "", "description": "unavailable"}]}