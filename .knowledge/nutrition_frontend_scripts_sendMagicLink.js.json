{"is_source_file": true, "format": "JavaScript", "description": "This script is a Node.js command-line utility for development purposes within a project that interacts with Supabase. It sends a magic link email for user authentication, attempts to synchronize user profiles, and handles environment configurations. It appears to be a custom script used specifically under a 'scripts' directory for admin or dev workflows.", "external_files": ["@supabase/supabase-js"], "external_methods": ["require", "process.argv.find", "process.env", "supabase.auth.signInWithOtp", "supabase.auth.admin.listUsers", "supabase.from", "console.log", "console.error", "process.exit"], "published": [], "classes": [], "methods": [{"name": "getArg(name, defaultValue = undefined)", "description": "Parses command-line arguments to retrieve specific options or flags, with optional default value.", "scope": "", "scopeKind": ""}, {"name": "getURL(path = '/')", "description": "Constructs a full URL based on environment variables or defaults, optionally appending a given path.", "scope": "", "scopeKind": ""}], "calls": ["require('@supabase/supabase-js').createClient", "getArg", "getURL", "supabase.auth.signInWithOtp", "supabase.auth.admin.listUsers", "supabase.from", "console.log", "console.error", "process.exit"], "search-terms": ["sendMagicLink", "Supabase auth script", "development utility", "admin profile upsert", "node scripts"], "state": 2, "file_id": 92, "knowledge_revision": 292, "git_revision": "b52dcdc418b60b77602b629778f48dc7540e75e9", "revision_history": [{"272": ""}, {"288": "b52dcdc418b60b77602b629778f48dc7540e75e9"}, {"292": "b52dcdc418b60b77602b629778f48dc7540e75e9"}], "ctags": [{"_type": "tag", "name": "SUPABASE_KEY", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const SUPABASE_KEY = process.env.REACT_APP_SUPABASE_KEY || process.env.SUPABASE_SERVICE_ROLE/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "SUPABASE_URL", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const SUPABASE_URL = process.env.REACT_APP_SUPABASE_URL || process.env.SUPABASE_URL;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getArg", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^function getArg(name, defaultValue = undefined) {$/", "language": "JavaScript", "kind": "function", "signature": "(name, defaultValue = undefined)"}, {"_type": "tag", "name": "getURL", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^function getURL(path = '\\/') {$/", "language": "JavaScript", "kind": "function", "signature": "(path = '/')"}, {"_type": "tag", "name": "isAdmin", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const isAdmin = !!getArg('admin', false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "match", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^            const match = usersData.users.find((u) => u.email && u.email.toLowerCase() === email/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "match", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^          const match = usersData.users.find((u) => u.email && u.email.toLowerCase() === email.t/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/scripts/sendMagicLink.js", "pattern": "/^    let userId = null;$/", "language": "JavaScript", "kind": "variable"}], "hash": "287873062025c6680fc7abd55475a94e", "format-version": 4, "code-base-name": "nutrition_frontend", "filename": "nutrition_frontend/scripts/sendMagicLink.js", "fields": [{"name": "let userId = null;", "scope": "", "scopeKind": "", "description": "unavailable"}]}