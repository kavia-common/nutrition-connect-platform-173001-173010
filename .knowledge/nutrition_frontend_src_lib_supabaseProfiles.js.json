{"is_source_file": true, "format": "JavaScript", "description": "JavaScript module providing utility functions for handling user profiles in a Supabase-backed application, including upserting user profiles and assigning admin roles upon first login.", "external_files": ["./supabaseClient"], "external_methods": ["supabase.from().upsert()", "supabase.from().select()"], "published": ["upsertProfileForUser", "ensureAdminOnFirstLogin"], "classes": [], "methods": [{"name": "upsertProfileForUser(userId, attributes = {})", "description": "Creates or updates a user profile record in the 'profiles' table with provided attributes; returns the data and error status.", "scope": "", "scopeKind": ""}, {"name": "ensureAdminOnFirstLogin(session, devAdminEmails = [])", "description": "Checks if the logged-in user's email is in the list of dev admin emails, and if so, updates their profile to have an 'admin' role, indicating first login is complete.", "scope": "", "scopeKind": ""}], "calls": ["supabase.from('profiles').upsert()", "supabase.from('profiles').select()"], "search-terms": ["supabaseProfiles", "upsertProfileForUser", "ensureAdminOnFirstLogin", "profiles table", "user profile management"], "state": 2, "file_id": 81, "knowledge_revision": 289, "git_revision": "", "revision_history": [{"221": ""}, {"257": ""}, {"274": ""}, {"289": ""}], "ctags": [{"_type": "tag", "name": "ensureAdminOnFirstLogin", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/supabaseProfiles.js", "pattern": "/^export async function ensureAdminOnFirstLogin(session, devAdminEmails = []) {$/", "language": "JavaScript", "kind": "function", "signature": "(session, devAdminEmails = [])"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/supabaseProfiles.js", "pattern": "/^    id: userId,$/", "language": "JavaScript", "kind": "property", "scope": "upsertProfileForUser.payload", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/supabaseProfiles.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "upsertProfileForUser", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/supabaseProfiles.js", "pattern": "/^    updated_at: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "upsertProfileForUser.payload", "scopeKind": "class"}, {"_type": "tag", "name": "upsertProfileForUser", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/supabaseProfiles.js", "pattern": "/^export async function upsertProfileForUser(userId, attributes = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, attributes = {})"}], "hash": "de3b22cc00df70c5abe47ee2fd339533", "format-version": 4, "code-base-name": "nutrition_frontend", "filename": "nutrition_frontend/src/lib/supabaseProfiles.js", "fields": [{"name": "id: userId,", "scope": "upsertProfileForUser.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at: new Date().toISOString(),", "scope": "upsertProfileForUser.payload", "scopeKind": "class", "description": "unavailable"}]}