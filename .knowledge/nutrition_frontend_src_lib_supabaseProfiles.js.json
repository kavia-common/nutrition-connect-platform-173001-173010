{"is_source_file": true, "format": "JavaScript", "description": "This file contains utility functions for managing user profiles in a Supabase database, including upserting profiles and setting admin roles based on session data.", "external_files": ["./supabaseClient"], "external_methods": ["supabase.from"], "published": ["upsertProfileForUser", "ensureAdminOnFirstLogin"], "classes": [], "methods": [{"name": "upsertProfileForUser(userId, attributes = {})", "description": "Upserts a user profile in the 'profiles' table with provided attributes, returning the data and any error.", "scope": "", "scopeKind": ""}, {"name": "ensureAdminOnFirstLogin(session, devAdminEmails = [])", "description": "Checks if a session's user email matches a list of dev admin emails, and if so, updates the user's profile to set role as 'admin' and mark onboarding as complete.", "scope": "", "scopeKind": ""}], "calls": ["supabase.from", "upsertProfileForUser"], "search-terms": ["supabaseProfiles", "upsertProfile", "admin role", "profile management", "Supabase profile utilities", "user session admin check"], "state": 2, "file_id": 81, "knowledge_revision": 274, "git_revision": "", "revision_history": [{"221": ""}, {"257": ""}, {"274": ""}], "ctags": [{"_type": "tag", "name": "ensureAdminOnFirstLogin", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/supabaseProfiles.js", "pattern": "/^export async function ensureAdminOnFirstLogin(session, devAdminEmails = []) {$/", "language": "JavaScript", "kind": "function", "signature": "(session, devAdminEmails = [])"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/supabaseProfiles.js", "pattern": "/^    id: userId,$/", "language": "JavaScript", "kind": "property", "scope": "upsertProfileForUser.payload", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/supabaseProfiles.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "upsertProfileForUser", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/supabaseProfiles.js", "pattern": "/^    updated_at: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "upsertProfileForUser.payload", "scopeKind": "class"}, {"_type": "tag", "name": "upsertProfileForUser", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/supabaseProfiles.js", "pattern": "/^export async function upsertProfileForUser(userId, attributes = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, attributes = {})"}], "hash": "cdf0402c0a95835d9255622dbbbbe193", "format-version": 4, "code-base-name": "nutrition_frontend", "filename": "nutrition_frontend/src/lib/supabaseProfiles.js", "fields": [{"name": "id: userId,", "scope": "upsertProfileForUser.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at: new Date().toISOString(),", "scope": "upsertProfileForUser.payload", "scopeKind": "class", "description": "unavailable"}]}