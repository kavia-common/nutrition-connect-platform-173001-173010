{"is_source_file": true, "format": "JavaScript", "description": "This file defines a chat service interface that interacts with a database via Supabase. It provides functions to list conversations for a user, create or retrieve conversations, list messages within a conversation, and send messages, encapsulating core chat functionalities.", "external_files": ["./supabaseClient"], "external_methods": ["getSupabaseClient"], "published": ["listConversationsForUser", "createConversation", "listMessages", "sendMessage"], "classes": [], "methods": [{"name": "listConversationsForUser(user_id)", "description": "Fetches all conversations involving a specific user, either as a coach or client, ordered by the date of the last message and creation.", "scope": "", "scopeKind": ""}, {"name": "createConversation({ coach_id, client_id })", "description": "Creates a new conversation between a coach and a client or returns an existing one if already present.", "scope": "", "scopeKind": ""}, {"name": "listMessages(conversation_id, { limit = 100 } = {})", "description": "Lists all messages for a given conversation, ordered by creation date, with an optional limit.", "scope": "", "scopeKind": ""}, {"name": "sendMessage({ conversation_id, sender_id, content })", "description": "Sends a message within a conversation, inserts the message into the database, and updates the conversation's last message timestamp.", "scope": "", "scopeKind": ""}], "calls": ["getSupabaseClient()", "supabase.from('conversations').select(...)", "supabase.from('conversations').insert(...)", "supabase.from('messages').select(...)", "supabase.from('messages').insert(...)", "supabase.from('conversations').update(...)"], "search-terms": ["chatService", "Conversations", "Messages", "SupabaseClient", "createConversation", "sendMessage", "listConversationsForUser"], "state": 2, "file_id": 86, "knowledge_revision": 231, "git_revision": "", "ctags": [{"_type": "tag", "name": "createConversation", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/chatService.js", "pattern": "/^export async function createConversation({ coach_id, client_id }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ coach_id, client_id })"}, {"_type": "tag", "name": "listConversationsForUser", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/chatService.js", "pattern": "/^export async function listConversationsForUser(user_id) {$/", "language": "JavaScript", "kind": "function", "signature": "(user_id)"}, {"_type": "tag", "name": "listMessages", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/chatService.js", "pattern": "/^export async function listMessages(conversation_id, { limit = 100 } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(conversation_id, { limit = 100 } = {})"}, {"_type": "tag", "name": "sendMessage", "path": "/home/kavia/workspace/code-generation/nutrition-connect-platform-173001-173010/nutrition_frontend/src/lib/chatService.js", "pattern": "/^export async function sendMessage({ conversation_id, sender_id, content }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ conversation_id, sender_id, content })"}], "hash": "c1b55d8dbbd5a0d0e8db94bd6020c281", "format-version": 4, "code-base-name": "nutrition_frontend", "filename": "nutrition_frontend/src/lib/chatService.js", "revision_history": [{"231": ""}]}